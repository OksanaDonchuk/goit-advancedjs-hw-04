import{a as y,S as L,i as u}from"./assets/vendor-5f0e12e0.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();const S="https://pixabay.com/api/",b="37918988-e3d1c8b61b1090de1ebde83c0";class w{constructor(){this.searchQuery="",this.page=1,this.totalHits=0}async fetchPost(){const e=new URLSearchParams({key:b,q:this.searchQuery,image_type:"photo",orientation:"horizontal",safesearch:!0,page:this.page,per_page:40});try{const s=await y.get(`${S}?${e.toString()}`);return this.incrementPage(),s.data}catch(s){console.error(s.toJSON())}}get query(){return this.searchQuery}set query(e){this.searchQuery=e}get hits(){return this.totalHits}set hits(e){this.totalHits=e}incrementPage(){this.page+=1}resetPage(){this.page=1}}class v{constructor({selector:e,hidden:s=!1}){this.refs=this.getRefs(e),s&&this.hide()}getRefs(e){const s={};return s.button=document.querySelector(e),s}enable(){this.refs.button.disable=!1,this.refs.button.classList.remove("btn-loading")}disable(){this.refs.button.disable=!0,this.refs.button.classList.add("btn-loading")}show(){this.refs.button.classList.remove("is-hidden")}hide(){this.refs.button.classList.add("is-hidden")}}class E{constructor({selector:e,hidden:s=!1}){this.refs=this.getRefs(e),s&&this.hide()}getRefs(e){const s={};return s.pageLoadStatus=document.querySelector(e),s.ellips=document.querySelector(".loader-ellips"),s.infScrollLast=document.querySelector(".infinite-scroll-last"),s.infScrollError=document.querySelector(".infinite-scroll-error"),s}show(){this.refs.pageLoadStatus.classList.remove("is-hidden")}hide(){this.refs.pageLoadStatus.classList.add("is-hidden")}enable(){this.refs.ellips.classList.add("is-hidden"),this.refs.infScrollLast.classList.add("is-hidden"),this.refs.infScrollError.classList.add("is-hidden")}loadingShow(){this.refs.ellips.classList.remove("is-hidden"),this.refs.infScrollLast.classList.add("is-hidden"),this.refs.infScrollError.classList.add("is-hidden")}loadingHide(){this.refs.ellips.classList.add("is-hidden")}lastElemShow(){this.refs.infScrollLast.classList.remove("is-hidden"),this.refs.ellips.classList.add("is-hidden"),this.refs.infScrollError.classList.add("is-hidden")}lastElemHide(){this.refs.infScrollLast.classList.add("is-hidden")}errorShow(){this.refs.infScrollError.classList.remove("is-hidden"),this.refs.ellips.classList.add("is-hidden"),this.refs.infScrollLast.classList.add("is-hidden")}errorHide(){this.refs.infScrollLast.classList.add("is-hidden")}}const d=document.querySelector(".search-form"),p=document.querySelector(".gallery"),P=d.offsetTop;function q(){window.scrollY>P?(d.classList.add("on-scroll"),p.style.paddingTop="72px"):(d.classList.remove("on-scroll"),p.style.paddingTop="24px")}const h={formSearch:document.querySelector(".search-form"),gallery:document.querySelector(".gallery")},n=new v({selector:".load-more",hidden:!0}),o=new E({selector:".page-load-status"}),a=new w,H=new L(".gallery__item",{captionDelay:250,captionsData:"alt",enableKeyboard:!0}),R={root:null,rootMargin:"100px",treshold:1},$=new IntersectionObserver(T,R);h.formSearch.addEventListener("submit",O);n.refs.button.addEventListener("click",_);window.addEventListener("scroll",q);function O(i){i.preventDefault(),o.hide(),a.query=i.target.searchQuery.value.trim(),n.show(),a.resetPage(),M(),f()}function _(){f(),o.show(),$.observe(o.refs.pageLoadStatus)}function f(){n.hide(),o.loadingShow(),a.fetchPost().then(i=>{const e=a.page-1;if(a.hits=i.totalHits,!i.totalHits)return n.hide(),o.errorShow(),u.show({message:"Sorry, there are no images matching your search query. Please try again.",position:"topRight",color:"#FCE8E6"});if(!i.hits.length){n.hide(),o.lastElemShow();return}x(i.hits),e===1&&(u.show({message:`Hooray! We found ${a.hits} images.`,position:"topRight",color:"#E6FCED"}),n.show()),o.enable()})}function x(i){let e=i.map(({largeImageURL:s,webformatURL:c,tags:t,likes:r,views:l,comments:g,downloads:m})=>`<a class="gallery__item" href="${s}">
                  <div class="photo-card">
                      <img src="${c}" alt="${t}" loading="lazy" />
                      <div class="info">
                        <p class="info-item"><b>Likes</b> ${r}</p>
                        <p class="info-item"><b>Views</b> ${l}</p>
                        <p class="info-item"><b>Comments</b> ${g}</p>
                        <p class="info-item"><b>Downloads</b> ${m}</p>
                      </div>
                    </div>
                 </a>`).join("");h.gallery.insertAdjacentHTML("beforeend",e),H.refresh()}function M(){h.gallery.innerHTML=""}async function T(i){await i.forEach(e=>{e.isIntersecting&&(console.log(e.isIntersecting),f())})}
//# sourceMappingURL=commonHelpers.js.map
